---
import { Github, Linkedin, Mail, User, AtSign, Pencil } from "lucide-react";
---

<section
  id="contact"
  class="scroll-mt-5 md:scroll-mt-20 flex flex-col items-center space-y-4 opacity-0"
  data-animation="visible-left"
>
  <h2 class="text-3xl font-bold tracking-tighter text-center gradient-text">
    Contacto
  </h2>
  <p class="text-blue-100 max-w-[700px] text-center">
    No dudes en contactarme para cualquier proyecto o colaboración.
  </p>
  <div class="flex justify-evenly w-full">
    <a
      href="https://github.com/RolandoU548"
      target="_blank"
      class="flex justify-center items-center bg-[linear-gradient(145deg,#50506070,#50506010)] backdrop-blur-md rounded-full h-20 w-20 transition duration-300 hover:bg-blue-950 border-blue-300 hover:border hover:-translate-y-1"
    >
      <Github />
    </a>
    <a
      href="https://www.linkedin.com/in/rolando-uzc%C3%A1tegui/"
      target="_blank"
      class="flex justify-center items-center bg-[linear-gradient(145deg,#50506070,#50506010)] backdrop-blur-md rounded-full h-20 w-20 transition duration-300 hover:bg-blue-950 border-blue-300 hover:border hover:-translate-y-1"
    >
      <Linkedin />
    </a>
    <a
      href="mailto:rolandou548@gmail.com"
      class="flex justify-center items-center bg-[linear-gradient(145deg,#50506070,#50506010)] backdrop-blur-md rounded-full h-20 w-20 transition duration-300 hover:bg-blue-950 border-blue-300 hover:border hover:-translate-y-1"
    >
      <Mail />
    </a>
  </div>
  <p>O también contáctame a través de mi correo:</p>
  <form
    class="w-full grid grid-cols-1 md:grid-cols-2 gap-5 p-4 rounded-lg bg-[linear-gradient(145deg,#1e293b80,#1e293b33)] backdrop-blur-md border border-blue-500/20"
  >
    <div class="relative">
      <label for="name">Nombre</label>
      <User size={18} className="absolute bottom-3 left-3 text-blue-400" />
      <input
        type="text"
        id="name"
        name="name"
        autocomplete="name"
        placeholder="Tu Nombre"
        required
        class="contact-input rounded border border-blue-500/20 outline-0 w-full p-2 pl-10 text-blue-300 mt-2 focus:border-blue-400 focus:shadow-[0_0_15px_rgba(79,172,254,0.5)] placeholder:text-white placeholder:opacity-40"
      />
      <div
        class="glow-effect absolute w-full h-0.5 -bottom-[8%] left-0 bg-blue-500 transition-all duration-300"
      >
      </div>
    </div>
    <div class="relative">
      <label for="email">Correo Electrónico</label>
      <AtSign size={18} className="absolute bottom-3 left-3 text-blue-400" />
      <input
        type="text"
        id="email"
        name="email"
        autocomplete="email"
        placeholder="Tu Correo"
        required
        class="contact-input rounded border border-blue-500/20 outline-0 w-full p-2 pl-10 text-blue-300 mt-2 focus:border-blue-400 focus:shadow-[0_0_15px_rgba(79,172,254,0.5)] placeholder:text-white placeholder:opacity-40"
      />
      <div
        class="glow-effect absolute w-full h-0.5 -bottom-[8%] left-0 bg-blue-500 transition-all duration-300"
      >
      </div>
    </div>
    <div class="relative col-span-full">
      <label for="subject">Asunto</label>
      <Pencil size={18} className="absolute bottom-3 left-3 text-blue-400" />
      <input
        id="subject"
        name="subject"
        required
        type="text"
        placeholder="Asunto"
        class="contact-input rounded border border-blue-500/20 outline-0 w-full p-2 pl-10 text-blue-300 mt-2 focus:border-blue-400 focus:shadow-[0_0_15px_rgba(79,172,254,0.5)] placeholder:text-white placeholder:opacity-40"
      />
      <div
        class="glow-effect absolute w-full h-0.5 -bottom-[8%] left-0 bg-blue-500 transition-all duration-300"
      >
      </div>
    </div>
    <div class="relative col-span-full">
      <label for="message">Mensaje</label>
      <Mail size={18} className="absolute top-11 left-3 text-blue-400" />
      <textarea
        id="message"
        name="message"
        required
        placeholder="Tu mensaje"
        rows="4"
        class="contact-input rounded border border-blue-500/20 outline-0 w-full p-2 pl-10 text-blue-300 mt-2 focus:border-blue-400 focus:shadow-[0_0_15px_rgba(79,172,254,0.5)] placeholder:text-white placeholder:opacity-40"
      ></textarea>
      <div
        class="glow-effect absolute w-full h-0.5 bottom-0 left-0 bg-blue-500 transition-all duration-300"
      >
      </div>
    </div>
    <button
      class="col-span-full cursor-pointer bg-blue-600 hover:bg-blue-500 py-2 px-4 rounded-md font-medium"
      type="submit">Enviar</button
    >
  </form>
</section>

<script>
  document.querySelector("form")?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const data = Object.fromEntries(
      Array.from(formData.entries()).map(([key, value]) => [
        key,
        value.toString(),
      ])
    );
    console.log(data);
    const mailtoLink = `mailto:rolandou548@gmail.com?subject=${encodeURIComponent(data.subject)}&body=${encodeURIComponent(`Nombre: ${data.name}%0AEmail: ${data.email}%0A%0AMensaje:%0A${data.message}`)}`;

    const tempLink = document.createElement("a");
    tempLink.href = mailtoLink;
    tempLink.style.display = "none";
    document.body.appendChild(tempLink);
    tempLink.click();
    document.body.removeChild(tempLink);
  });
</script>
